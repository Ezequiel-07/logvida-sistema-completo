# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  maxInstances: 1

# The env section defines environment variables for the build and runtime.
# It correctly maps secrets from Secret Manager to environment variables.
env:
  - variable: FIREBASE_CLIENT_EMAIL
    secret: FIREBASE_CLIENT_EMAIL
  - variable: FIREBASE_PRIVATE_KEY
    secret: FIREBASE_PRIVATE_KEY
  - variable: FIREBASE_PROJECT_ID
    secret: FIREBASE_PROJECT_ID
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: NEXT_PUBLIC_FIREBASE_API_KEY
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    secret: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    secret: NEXT_PUBLIC_FIREBASE_PROJECT_ID
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    secret: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    secret: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: NEXT_PUBLIC_FIREBASE_APP_ID
  - variable: NEXT_PUBLIC_FIREBASE_VAPID_KEY
    secret: NEXT_PUBLIC_FIREBASE_VAPID_KEY
  - variable: GOOGLE_MAPS_SERVER_API_KEY
    secret: GOOGLE_MAPS_SERVER_API_KEY
  - variable: NEXT_PUBLIC_GOOGLE_MAPS_API_KEY
    secret: NEXT_PUBLIC_GOOGLE_MAPS_API_KEY
  - variable: NEXT_PUBLIC_GOOGLE_MAPS_MAP_ID
    secret: NEXT_PUBLIC_GOOGLE_MAPS_MAP_ID

# The requiredSecrets section ensures that the specified secrets are available.
# The availability is implicitly BUILD and RUNTIME when not specified.
requiredSecrets:
  - secret: FIREBASE_CLIENT_EMAIL
    version: latest
  - secret: FIREBASE_PRIVATE_KEY
    version: latest
  - secret: FIREBASE_PROJECT_ID
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_API_KEY
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_APP_ID
    version: latest
  - secret: NEXT_PUBLIC_FIREBASE_VAPID_KEY
    version: latest
  - secret: GOOGLE_MAPS_SERVER_API_KEY
    version: latest
  - secret: NEXT_PUBLIC_GOOGLE_MAPS_API_KEY
    version: latest
  - secret: NEXT_PUBLIC_GOOGLE_MAPS_MAP_ID
    version: latest
